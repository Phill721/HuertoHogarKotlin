<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/cosa/presentation/ui/screens/AdminMainScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/cosa/presentation/ui/screens/AdminMainScreen.kt" />
              <option name="originalContent" value="package com.example.cosa.presentation.ui.screens&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Person&#10;import androidx.compose.material.icons.filled.ShoppingCart&#10;import androidx.compose.runtime.*&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.navigation.NavHostController&#10;import com.example.cosa.R&#10;import com.example.cosa.presentation.viewmodel.SessionViewModel&#10;import com.example.cosa.data.repository.ProductoRepository&#10;import com.example.cosa.data.database.AppDatabase&#10;import com.example.cosa.data.repository.VentaRepository&#10;&#10;@Composable&#10;fun AdminMainScreen(navController: NavHostController, sessionViewModel: SessionViewModel) {&#10;    val context = LocalContext.current&#10;    val productoRepo = remember { ProductoRepository() }&#10;    val ventaRepo = remember { VentaRepository() }&#10;    val db = remember { AppDatabase.getDatabase(context) }&#10;    val usuarioDao = remember { db.usuarioDao() }&#10;&#10;    var productosCount by remember { mutableStateOf(0) }&#10;    var usuariosCount by remember { mutableStateOf(0) }&#10;    var ventasCount by remember { mutableStateOf(0) }&#10;&#10;    // colores coherentes con admin.html&#10;    val accentGreen = Color(0xFF2E8B57)&#10;    val accentBrown = Color(0xFF8B4513)&#10;    val bg = Color(0xFFF7F7F7)&#10;&#10;    val email by sessionViewModel.userEmail.collectAsState()&#10;&#10;    LaunchedEffect(Unit) {&#10;        // cargar datos&#10;        productosCount = productoRepo.obtenerProductos().size&#10;        usuariosCount = usuarioDao.getAll().size&#10;        ventasCount = ventaRepo.obtenerVentas().size&#10;    }&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(bg)&#10;            .padding(16.dp)&#10;    ) {&#10;        // Encabezado estilo admin&#10;        Row(modifier = Modifier&#10;            .fillMaxWidth()&#10;            .background(accentGreen)&#10;            .padding(12.dp), verticalAlignment = Alignment.CenterVertically) {&#10;            Text(text = &quot;Panel de Control - Admin&quot;, color = Color.White, fontSize = 20.sp, fontWeight = FontWeight.Bold, modifier = Modifier.padding(start = 8.dp))&#10;            Spacer(modifier = Modifier.weight(1f))&#10;&#10;            // mostrar correo de sesión si existe&#10;            if (!email.isNullOrEmpty()) {&#10;                Text(text = email ?: &quot;&quot;, color = Color.White, modifier = Modifier.padding(end = 12.dp))&#10;            }&#10;&#10;            // botón volver a tienda&#10;            OutlinedButton(onClick = { navController.navigate(&quot;home&quot;) }, colors = ButtonDefaults.outlinedButtonColors(contentColor = Color.White)) {&#10;                Text(&quot;Volver a la Tienda&quot;)&#10;            }&#10;        }&#10;&#10;        Spacer(modifier = Modifier.height(16.dp))&#10;&#10;        // Mini-dashboard&#10;        Row(modifier = Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.spacedBy(12.dp)) {&#10;            // Productos&#10;            Card(modifier = Modifier.weight(1f), elevation = CardDefaults.cardElevation(6.dp)) {&#10;                Row(modifier = Modifier.padding(12.dp), verticalAlignment = Alignment.CenterVertically) {&#10;                    Image(painter = painterResource(id = R.drawable.icon2), contentDescription = &quot;Productos&quot;, modifier = Modifier.size(36.dp))&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Column {&#10;                        Text(&quot;Productos&quot;, fontWeight = FontWeight.SemiBold)&#10;                        Text(productosCount.toString(), fontSize = 20.sp, color = accentGreen)&#10;                    }&#10;                }&#10;            }&#10;&#10;            // Usuarios&#10;            Card(modifier = Modifier.weight(1f), elevation = CardDefaults.cardElevation(6.dp)) {&#10;                Row(modifier = Modifier.padding(12.dp), verticalAlignment = Alignment.CenterVertically) {&#10;                    Icon(Icons.Filled.Person, contentDescription = &quot;Usuarios&quot;, tint = accentBrown, modifier = Modifier.size(36.dp))&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Column {&#10;                        Text(&quot;Usuarios&quot;, fontWeight = FontWeight.SemiBold)&#10;                        Text(usuariosCount.toString(), fontSize = 20.sp, color = accentGreen)&#10;                    }&#10;                }&#10;            }&#10;&#10;            // Ventas&#10;            Card(modifier = Modifier.weight(1f), elevation = CardDefaults.cardElevation(6.dp)) {&#10;                Row(modifier = Modifier.padding(12.dp), verticalAlignment = Alignment.CenterVertically) {&#10;                    Icon(Icons.Filled.ShoppingCart, contentDescription = &quot;Ventas&quot;, tint = accentBrown, modifier = Modifier.size(36.dp))&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Column {&#10;                        Text(&quot;Ventas&quot;, fontWeight = FontWeight.SemiBold)&#10;                        Text(ventasCount.toString(), fontSize = 20.sp, color = accentGreen)&#10;                    }&#10;                }&#10;            }&#10;        }&#10;&#10;        Spacer(modifier = Modifier.height(20.dp))&#10;&#10;        // Acciones principales&#10;        Button(onClick = { navController.navigate(&quot;admin/productos&quot;) }, modifier = Modifier.fillMaxWidth()) {&#10;            Text(&quot;Productos&quot;)&#10;        }&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        Button(onClick = { navController.navigate(&quot;admin/usuarios&quot;) }, modifier = Modifier.fillMaxWidth()) {&#10;            Text(&quot;Usuarios&quot;)&#10;        }&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;        Button(onClick = { navController.navigate(&quot;admin/ventas&quot;) }, modifier = Modifier.fillMaxWidth()) {&#10;            Text(&quot;Ventas&quot;)&#10;        }&#10;    }&#10;}&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.cosa.presentation.ui.screens&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Person&#10;import androidx.compose.material.icons.filled.ShoppingCart&#10;import androidx.compose.runtime.*&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.platform.LocalConfiguration&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextOverflow&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.navigation.NavHostController&#10;import com.example.cosa.R&#10;import com.example.cosa.presentation.viewmodel.SessionViewModel&#10;import com.example.cosa.data.repository.ProductoRepository&#10;import com.example.cosa.data.database.AppDatabase&#10;import com.example.cosa.data.repository.VentaRepository&#10;&#10;@Composable&#10;fun AdminMainScreen(navController: NavHostController, sessionViewModel: SessionViewModel) {&#10;    val context = LocalContext.current&#10;    val config = LocalConfiguration.current&#10;    val screenWidthDp = config.screenWidthDp&#10;&#10;    val productoRepo = remember { ProductoRepository() }&#10;    val ventaRepo = remember { VentaRepository() }&#10;    val db = remember { AppDatabase.getDatabase(context) }&#10;    val usuarioDao = remember { db.usuarioDao() }&#10;&#10;    var productosCount by remember { mutableStateOf(0) }&#10;    var usuariosCount by remember { mutableStateOf(0) }&#10;    var ventasCount by remember { mutableStateOf(0) }&#10;&#10;    // colores coherentes con admin.html&#10;    val accentGreen = Color(0xFF2E8B57)&#10;    val accentBrown = Color(0xFF8B4513)&#10;    val bg = Color(0xFFF7F7F7)&#10;    val accentRed = Color(0xFFC62828)&#10;&#10;    val email by sessionViewModel.userEmail.collectAsState()&#10;&#10;    LaunchedEffect(Unit) {&#10;        // cargar datos&#10;        productosCount = productoRepo.obtenerProductos().size&#10;        usuariosCount = usuarioDao.getAll().size&#10;        ventasCount = ventaRepo.obtenerVentas().size&#10;    }&#10;&#10;    val showEmail = screenWidthDp &gt; 480&#10;    val showFullBackText = screenWidthDp &gt; 360&#10;    val isCompact = screenWidthDp &lt; 600&#10;    val isVeryNarrow = screenWidthDp &lt; 360&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(bg)&#10;            .padding(8.dp)&#10;    ) {&#10;        // Encabezado responsive: en pantallas muy estrechas apilar elementos&#10;        if (isVeryNarrow) {&#10;            Column(modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(accentGreen)&#10;                .padding(12.dp)) {&#10;                Text(&#10;                    text = &quot;Panel de Control - Admin&quot;,&#10;                    color = Color.White,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    softWrap = true&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                Row(verticalAlignment = Alignment.CenterVertically) {&#10;                    Spacer(modifier = Modifier.weight(1f))&#10;                    Button(&#10;                        onClick = { navController.navigate(&quot;home&quot;) },&#10;                        colors = ButtonDefaults.buttonColors(containerColor = accentRed),&#10;                        contentPadding = PaddingValues(horizontal = 12.dp, vertical = 8.dp)&#10;                    ) {&#10;                        Text(&quot;Volver&quot;, color = Color.White)&#10;                    }&#10;                }&#10;            }&#10;        } else {&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .background(accentGreen)&#10;                    .padding(vertical = 12.dp, horizontal = 12.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                // permitir que el título pueda ocupar 2 líneas si hace falta&#10;                Text(&#10;                    text = &quot;Panel de Control - Admin&quot;,&#10;                    color = Color.White,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    modifier = Modifier.padding(start = 4.dp),&#10;                    maxLines = 2,&#10;                    overflow = TextOverflow.Ellipsis&#10;                )&#10;&#10;                Spacer(modifier = Modifier.weight(1f))&#10;&#10;                if (showEmail &amp;&amp; !email.isNullOrEmpty()) {&#10;                    Text(&#10;                        text = email ?: &quot;&quot;,&#10;                        color = Color.White,&#10;                        modifier = Modifier.padding(end = 8.dp),&#10;                        maxLines = 1,&#10;                        overflow = TextOverflow.Ellipsis&#10;                    )&#10;                }&#10;&#10;                Button(&#10;                    onClick = { navController.navigate(&quot;home&quot;) },&#10;                    colors = ButtonDefaults.buttonColors(containerColor = accentRed),&#10;                    contentPadding = PaddingValues(horizontal = 12.dp, vertical = 8.dp),&#10;                    modifier = Modifier.padding(start = 8.dp)&#10;                ) {&#10;                    Text(if (showFullBackText) &quot;Volver a la Tienda&quot; else &quot;Volver&quot;, color = Color.White)&#10;                }&#10;            }&#10;        }&#10;&#10;        Spacer(modifier = Modifier.height(8.dp))&#10;&#10;        // Dashboard: ocupar todo el espacio disponible&#10;        if (isCompact) {&#10;            Column(modifier = Modifier&#10;                .fillMaxWidth()&#10;                .weight(1f), verticalArrangement = Arrangement.spacedBy(8.dp)) {&#10;                DashboardCardColumnItem(&quot;Productos&quot;, productosCount.toString(), painterResource(id = R.drawable.icon2), accentBrown, accentGreen, isCompact = true, modifier = Modifier.weight(1f))&#10;                DashboardCardColumnItem(&quot;Usuarios&quot;, usuariosCount.toString(), null, accentBrown, accentGreen, Icons.Filled.Person, isCompact = true, modifier = Modifier.weight(1f))&#10;                DashboardCardColumnItem(&quot;Ventas&quot;, ventasCount.toString(), null, accentBrown, accentGreen, Icons.Filled.ShoppingCart, isCompact = true, modifier = Modifier.weight(1f))&#10;            }&#10;        } else {&#10;            Row(modifier = Modifier&#10;                .fillMaxWidth()&#10;                .weight(1f), horizontalArrangement = Arrangement.spacedBy(8.dp)) {&#10;                DashboardCardColumnItem(&quot;Productos&quot;, productosCount.toString(), painterResource(id = R.drawable.icon2), accentBrown, accentGreen, modifier = Modifier.weight(1f), isCompact = false)&#10;                DashboardCardColumnItem(&quot;Usuarios&quot;, usuariosCount.toString(), null, accentBrown, accentGreen, Icons.Filled.Person, modifier = Modifier.weight(1f), isCompact = false)&#10;                DashboardCardColumnItem(&quot;Ventas&quot;, ventasCount.toString(), null, accentBrown, accentGreen, Icons.Filled.ShoppingCart, modifier = Modifier.weight(1f), isCompact = false)&#10;            }&#10;        }&#10;&#10;        // Área de acciones (fuera del dashboard para que no se comprima)&#10;        Column(modifier = Modifier&#10;            .fillMaxWidth()&#10;            .wrapContentHeight()&#10;            .padding(top = 8.dp), verticalArrangement = Arrangement.spacedBy(8.dp)) {&#10;&#10;            AdminActionButton(text = &quot;Productos&quot;, onClick = { navController.navigate(&quot;admin/productos&quot;) }, bgColor = accentGreen)&#10;            AdminActionButton(text = &quot;Usuarios&quot;, onClick = { navController.navigate(&quot;admin/usuarios&quot;) }, bgColor = accentGreen)&#10;            AdminActionButton(text = &quot;Ventas&quot;, onClick = { navController.navigate(&quot;admin/ventas&quot;) }, bgColor = accentGreen)&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun DashboardCardColumnItem(&#10;    title: String,&#10;    value: String,&#10;    iconPainter: androidx.compose.ui.graphics.painter.Painter? = null,&#10;    iconTint: Color,&#10;    accentColor: Color,&#10;    vectorIcon: androidx.compose.ui.graphics.vector.ImageVector? = null,&#10;    modifier: Modifier = Modifier,&#10;    isCompact: Boolean = false&#10;) {&#10;    val minH = if (isCompact) 140.dp else 180.dp&#10;    Card(modifier = modifier.fillMaxSize().heightIn(min = minH), elevation = CardDefaults.cardElevation(6.dp)) {&#10;        Row(modifier = Modifier&#10;            .fillMaxSize()&#10;            .padding(16.dp), verticalAlignment = Alignment.CenterVertically) {&#10;            if (iconPainter != null) {&#10;                Image(painter = iconPainter, contentDescription = title, modifier = Modifier.size(if (isCompact) 48.dp else 64.dp))&#10;            } else if (vectorIcon != null) {&#10;                Icon(vectorIcon, contentDescription = title, tint = iconTint, modifier = Modifier.size(if (isCompact) 48.dp else 64.dp))&#10;            }&#10;&#10;            Spacer(modifier = Modifier.width(18.dp))&#10;&#10;            Column(modifier = Modifier.fillMaxWidth(), verticalArrangement = Arrangement.Center) {&#10;                // permitir wrapping en varias líneas para evitar recortes&#10;                Text(&#10;                    text = title,&#10;                    fontWeight = FontWeight.SemiBold,&#10;                    fontSize = 20.sp,&#10;                    softWrap = true&#10;                )&#10;                Spacer(modifier = Modifier.height(10.dp))&#10;                Text(value, fontSize = 26.sp, color = accentColor)&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun AdminActionButton(text: String, onClick: () -&gt; Unit, bgColor: Color) {&#10;    Button(&#10;        onClick = onClick,&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .heightIn(min = 72.dp),&#10;        colors = ButtonDefaults.buttonColors(containerColor = bgColor),&#10;        contentPadding = PaddingValues(vertical = 16.dp, horizontal = 18.dp)&#10;    ) {&#10;        Text(text = text, color = Color.White, textAlign = TextAlign.Center, softWrap = true)&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>